{{ if .Site.Params.projects.enable | default false }}
<section id="projects" class="py-5">
  <div class="container">
    <h3 class="text-center">
      {{ .Site.Params.projects.title | default "Projects" }}
    </h3>
    <div class="row justify-content-center px-3 px-md-5">
      {{ range .Site.Params.projects.items }}
      <div class="col-lg-4 col-md-6 my-3">
        <div class="card my-3 h-100" title="{{ .title }}">
          <div class="card-head">
            <img class="card-img-top" src="{{ .image }}" alt="{{ .title }}" />
          </div>
          <div class="card-body bg-transparent p-3">
            <div class="pb-2 bg-transparent">
              {{ range .badges }}
              <span class="badge badge-secondary">{{ . }}</span>
              {{ end }}
            </div>
            <h5 class="card-title bg-transparent mt-1">{{ .title }}</h5>
            <div class="card-text bg-transparent secondary-font">
              {{ .content }}
            </div>
            {{ if (.gallery) }}
            <div class="row g-3 img-grid mt-2">
              {{ range .gallery }}
              <div class="col-4 col-sm-4 col-md-4 col-lg-3">
                <img
                  src="{{ .url }}"
                  alt="{{ .alt | default "Image" }}"
                  data-bs-toggle="modal"
                  data-bs-target="#imageModal"
                  data-bs-src="{{ .url }}"
                />
              </div>
              {{ end }}
            </div>
            {{ end }}
          </div>
          {{ if or (.links) (.featured) }}
          <div class="card-footer py-3">
            {{ range .links }}
            <span class="m-1 mx-2">
              <a href="{{ .url }}" target="_blank">
                <i class="{{ .icon }}"></i>
              </a>
            </span>
            {{ end }} {{ if .featured }}
            <span class="float-end">
              <a class="btn btn-sm" href="{{ .featured.link }}" target="_blank">
                {{ .featured.name }}
              </a>
            </span>
            {{ end }}
          </div>
          {{ end }}
        </div>
      </div>
      {{ end }} {{ range ( where .Site.RegularPages "Type" "projects" ) }} {{ if
      .Params.showInHome | default true }}
      <div class="col-lg-4 col-md-6 my-3">
        <div class="card my-3 h-100" title="{{ .Title }}">
          <div class="card-head">
            <img
              class="card-img-top"
              src="{{ .Params.image }}"
              alt="{{ .Title }}"
            />
          </div>
          <div class="card-body bg-transparent p-3">
            <div class="pb-2 bg-transparent">
              {{ range .Params.badges }}
              <span class="badge badge-secondary">{{ . }}</span>
              {{ end }}
            </div>
            <h5 class="card-title bg-transparent">
              {{ .Title | truncate 50 }}
            </h5>
            <div class="card-text bg-transparent secondary-font">
              {{ .Summary | truncate 100 | safeHTML }}
            </div>
          </div>
          <div class="card-footer py-3">
            {{ range .Params.links }}
            <span class="m-1 mx-2">
              <a href="{{ .url }}">
                <i class="{{ .icon }}"></i>
              </a>
            </span>
            {{ end }}
            <span class="float-end">
              <a class="btn btn-sm" href="{{ .RelPermalink }}"> Know more </a>
            </span>
          </div>
        </div>
      </div>
      {{ end }} {{ end }}
    </div>
  </div>
</section>
{{ end }}

<style>
  .img-grid img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 0px;
    object-fit: cover;
  }
  .img-grid img:hover {
    transform: scale(1.05);
  }
</style>
<!-- Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0 bg-transparent">
      <div class="modal-body p-0">
        <img id="modalImage" src="" alt="Full Size" class="w-100 rounded" />
      </div>
    </div>
  </div>
</div>
<script>
  const imageModal = document.getElementById("imageModal");
  const modalImage = document.getElementById("modalImage");
  imageModal.addEventListener("show.bs.modal", (event) => {
    const img = event.relatedTarget;
    const src = img.getAttribute("data-bs-src");
    modalImage.src = src;
  });
</script>
